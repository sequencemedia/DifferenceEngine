"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.charAt=charAt;exports.charCodeAt=charCodeAt;exports.entityAt=entityAt;exports.entityCodeAt=entityCodeAt;exports.entityNameAt=entityNameAt;exports.charOf=charOf;exports.entityOf=entityOf;exports.fromCharCode=fromCharCode;exports.charFromEntityCode=charFromEntityCode;exports.charFromEntityName=charFromEntityName;exports.toEntityCode=toEntityCode;exports.toEntityName=toEntityName;exports.entityCodeFromChar=entityCodeFromChar;exports.entityNameFromChar=entityNameFromChar;exports.entityCodeOf=entityCodeOf;exports.entityNameOf=entityNameOf;exports.fromDecToHex=fromDecToHex;exports.fromDecToOct=fromDecToOct;exports.reverse=reverse;exports.default=void 0;var _common=require("../common");var _string=require("../common/string");function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}return obj;}var OCT=8;var DEC=10;var HEX=16;var X=/\u0026[\w]+\u003b|\u0026\u0023(?:[1-9]+[\d]+|[1-9])\u003b+/g;var XCODE=/\u0026\u0023(?:[1-9]+[\d]+|[1-9]+)\u003b+/g;var XNAME=/\u0026[\w]+\u003b+/g;var A='&';var N=38;function charAt(s,i){if((0,_common.isString)(s)&&(0,_common.isNumber)(i)){let v=s.charAt(i);if(v===A){X.lastIndex=i;const m=X.exec(s);if(m===null){return A;}else{v=m.shift();let c;if((c=(0,_string.getCharFromEntityName)(v))!==null)return c;if((c=(0,_string.getCharFromEntityCode)(v))!==null)return c;return A;}}else{return v;}}return null;}function charCodeAt(s,i){if((0,_common.isString)(s)&&(0,_common.isNumber)(i)){let v=s.charCodeAt(i);if(v===N){X.lastIndex=i;const m=X.exec(s);if(m===null){return N;}else{v=m.shift();let c;if((c=(0,_string.getCharFromEntityName)(v))!==null)return c.charCodeAt(0);if((c=(0,_string.getCharFromEntityCode)(v))!==null)return c.charCodeAt(0);return N;}}else{return v;}}return null;}function entityAt(s,i){if((0,_common.isString)(s)&&(0,_common.isNumber)(i)){const v=s.charAt(i);if(v===A){X.lastIndex=i;const m=X.exec(s);return m===null?A:m.shift();}else{return v;}}return null;}function entityCodeAt(s,i){if((0,_common.isString)(s)&&(0,_common.isNumber)(i)){let v=s.charAt(i);if(v===A){const x=XCODE;x.lastIndex=i;const m=x.exec(s);if(m===null){return A;}else{v=m.shift();let c;if((c=(0,_string.getCharFromEntityCode)(v))!==null)return c;return A;}}else{return v;}}return null;}function entityNameAt(s,i){if((0,_common.isString)(s)&&(0,_common.isNumber)(i)){let v=s.charAt(i);if(v===A){const x=XNAME;x.lastIndex=i;const m=x.exec(s);if(m===null){return A;}else{v=m.shift();let c;if((c=(0,_string.getCharFromEntityName)(v))!==null)return c;return A;}}else{return v;}}return null;}function charOf(s){if((0,_common.isString)(s)){if(s.length<4){return s.charAt(0);}else{let v=s.charAt(0);if(v===A){X.lastIndex=0;const m=X.exec(s);if(m===null){return A;}else{v=m.shift();let c;if((c=(0,_string.getCharFromEntityName)(v))!==null)return c;if((c=(0,_string.getCharFromEntityCode)(v))!==null)return c;return A;}}else{return v;}}}return null;}function entityOf(s){throw new Error('Not implemented');}function fromCharCode(i){return(0,_common.isNumber)(i)?(0,_string.getFromCharCode)(i):null;}function charFromEntityCode(s){return(0,_common.isString)(s)?(0,_string.getCharFromEntityCode)(s):null;}function charFromEntityName(s){return(0,_common.isString)(s)?(0,_string.getCharFromEntityName)(s):null;}function toEntityCode(s){if((0,_common.isString)(s)){let i=0;const j=s.length;let c,h;let r='';for(i,j;i<j;i=i+1){c=s.charAt(i);h=(0,_string.getEntityCodeFromChar)(c);r=r+(h===null?c:h);}return r;}return null;}function toEntityName(s){if((0,_common.isString)(s)){let i=0;const j=s.length;let c,h;let r='';for(i,j;i<j;i=i+1){c=s.charAt(i);h=(0,_string.getEntityNameFromChar)(c);r=r+(h===null?c:h);}return r;}return null;}function entityCodeFromChar(s){return(0,_common.isString)(s)&&s.length===1?(0,_string.getEntityCodeFromChar)(s):null;}function entityNameFromChar(s){return(0,_common.isString)(s)&&s.length===1?_string.entityNameFromCharMap.has(s)?_string.entityNameFromCharMap.get(s):s:null;}function entityCodeOf(s){return(0,_common.isString)(s)&&s.length===1?(0,_string.getEntityCodeFromChar)(s):null;}function entityNameOf(s){return(0,_common.isString)(s)&&s.length===1?_string.entityNameFromCharMap.has(s)?_string.entityNameFromCharMap.get(s):s:null;}function fromDecToHex(v){return(0,_common.isNumber)(v)?v.toString(HEX):(0,_common.isString)(v)?isNaN(v=parseInt(v,DEC))?null:v.toString(HEX):null;}function fromDecToOct(v){return(0,_common.isNumber)(v)?v.toString(OCT):(0,_common.isString)(v)?isNaN(v=parseInt(v,DEC))?null:v.toString(OCT):null;}function reverse(string){if((0,_common.isString)(string)){let s='';let i=string.length;do{s=s+string.charAt(--i);}while(i>0);return s;}return null;}class StringEngine{}exports.default=StringEngine;_defineProperty(StringEngine,"charAt",charAt);_defineProperty(StringEngine,"charCodeAt",charCodeAt);_defineProperty(StringEngine,"charOf",charOf);_defineProperty(StringEngine,"entityAt",entityAt);_defineProperty(StringEngine,"entityCodeAt",entityCodeAt);_defineProperty(StringEngine,"entityNameAt",entityNameAt);_defineProperty(StringEngine,"entityOf",entityOf);_defineProperty(StringEngine,"fromCharCode",fromCharCode);_defineProperty(StringEngine,"charFromEntityCode",charFromEntityCode);_defineProperty(StringEngine,"charFromEntityName",charFromEntityName);_defineProperty(StringEngine,"toEntityCode",toEntityCode);_defineProperty(StringEngine,"toEntityName",toEntityName);_defineProperty(StringEngine,"entityCodeFromChar",entityCodeFromChar);_defineProperty(StringEngine,"entityNameFromChar",entityNameFromChar);_defineProperty(StringEngine,"entityCodeOf",entityCodeOf);_defineProperty(StringEngine,"entityNameOf",entityNameOf);_defineProperty(StringEngine,"fromDecToHex",fromDecToHex);_defineProperty(StringEngine,"fromDecToOct",fromDecToOct);_defineProperty(StringEngine,"reverse",reverse);